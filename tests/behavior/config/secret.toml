[secret.test_backend]
  type = "test"
  replacement = "this_is_a_secret_value"

[transforms.add_fields_nested]
  inputs = []
  type = "add_fields"
  [transforms.add_fields_nested.fields]
    "foobar" = "SECRET[test_backend.abc]"
[[tests]]
  name = "add_fields_nested"
  [tests.input]
    insert_at = "add_fields_nested"
    type = "raw"
    value = ""
  [[tests.outputs]]
    extract_from = "add_fields_nested"
    [[tests.outputs.conditions]]
        type = "vrl"
        source = '''
            .foobar == "this_is_a_secret_value"
        '''
